<div class="space-y-3">
  @if (tasks && tasks.length > 0) {
    @for (task of tasks; track task.title) {
      <div 
        class="flex items-start justify-between p-3 rounded-lg border border-gray-200 bg-white shadow-sm hover:shadow-md transition-all duration-200"
        [ngClass]="{
          'border-green-200 bg-green-50': task.status === 'Terminé',
          'border-blue-200 bg-blue-50': task.status === 'En cours',
          'border-gray-200 bg-gray-50': task.status === 'En attente'
        }"
      >
        <!-- Left: Title + Priority (Compact) -->
        <div class="flex-1 min-w-0 pr-3">
          <!-- Priority Badge (Inline Circle) -->
          <span 
            class="inline-flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold text-white mr-2 flex-shrink-0"
            [ngClass]="{
              'bg-red-500': task.priority === 'Haute',
              'bg-yellow-500': task.priority === 'Moyenne',
              'bg-green-500': task.priority === 'Basse'
            }"
          >
            {{ task.priority.charAt(0) }}
          </span>
          <!-- Title (Truncated if needed) -->
          <h4 class="font-medium text-sm text-gray-900 truncate" title="{{ task.title }}">
            {{ task.title }}
          </h4>
          <!-- Priority Text (Below, subtle) -->
          <p class="text-xs text-gray-500 mt-0.5">Priorité: {{ task.priority }}</p>
        </div>

        <!-- Right: Status Badge (Pill) -->
        <span 
          class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ml-2 flex-shrink-0"
          [ngClass]="{
            'bg-green-100 text-green-800': task.status === 'Terminé',
            'bg-blue-100 text-blue-800': task.status === 'En cours',
            'bg-gray-100 text-gray-700': task.status === 'En attente'
          }"
        >
          {{ task.status }}
        </span>
      </div>
    }
  } @else {
    <div class="text-center py-4 text-gray-400 text-xs italic">
      Aucune tâche récente
    </div>
  }
</div>